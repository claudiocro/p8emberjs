/*!
 * p8emberjs - v0.5.6
 * plus8.ch
 * 
 * Copyright (c) 2012, Claudio Romano
 * Licensed Apache-2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Date: 2012-11-23 13:46:35 +0100
 */
(function(){var e=Ember.Namespace.create();window.P8Ember=e})(),function(){Ember.Handlebars.registerHelper("p8formatDate",function(e,t){var n=this.get(e);return n===undefined?undefined:t.hash.time!==undefined?n.p8DeDate(!0):n.p8DeDate()})}(),function(){var e=Ember.Namespace.create();window.P8DS=e,e.ILoadable=Ember.Mixin.create({loaded:!1,loading:!1}),e.Service=Ember.Object.extend({getJSON:function(e,t,n,r){var i=n;jQuery.isFunction(t)&&(r=r||n,i=t,t=undefined);var s=jQuery.getJSON(e,t,function(e){i!==undefined&&i(e)});r!==undefined&&s.error(r)}}),e.Store=Ember.ArrayProxy.extend({content:null,_idIdx:{},init:function(){this._super(),this.set("content",[])},find:function(e){var t=this.get("content");return this._idIdx[e]===undefined?undefined:t.objectAt(this._idIdx[e])},indexOfId:function(e){return this._idIdx[e]},put:function(e){this._idIdx[e.id]===undefined?(this.pushObject(e),this._idIdx[e.id]=this.get("length")-1):this.insertAt(this._idIdx[e.id],e)}})}(),function(){var e=Ember.get;window.P8UI=Ember.Namespace.create();var t=Ember.Namespace.create();window&&(window.P8UI=t),t.TableView=Ember.ContainerView.extend({tagName:"table",content:null,columns:null,columnsMeta:null,classNames:["p8ui-tableView"],childViews:["headerView","bodyView"],clickItem:null}),t.TableView.reopen({headerView:Ember.computed(function(){return Ember.View.create({tagName:"thead",columns:e(this,"columns"),columnsMeta:e(this,"columnsMeta"),template:Ember.computed(function(){var t="<tr>";for(var n=0;n<this.get("columns").length;n++){var r=this.get("columns")[n].replace(".","");t+='<th class="col-'+n+'"',e(this,"columnsMeta."+r+".headerWidth")!==undefined&&e(this,"columnsMeta."+r+".headerWidth")&&(t+=' style="width: '+e(this,"columnsMeta."+r+".headerWidth")+';"'),t+=">",e(this,"columnsMeta."+r+".headerValue")!==undefined&&e(this,"columnsMeta."+r+".headerValue")!==null?t+=e(this,"columnsMeta."+r+".headerValue"):t+=r,t+="</th>"}return t+="</tr>",Ember.Handlebars.compile(t)})})}).property(),bodyView:Ember.computed(function(){return t.CollectionView.create({clickItem:this.get("clickItem"),content:Ember.computed(function(){return e(this.get("tableView"),"content")}).property("tableView.content.@each").cacheable(),tableView:this,columns:e(this,"columns")})}).property()}),t.CollectionView=Ember.CollectionView.extend({tagName:"tbody",clickItem:null,itemViewClass:Ember.View.extend({template:Ember.computed(function(){var e="";for(var t=0;t<this.get("parentView.columns").length;t++)e+='<td {{action "_clickItem" target="view" on="click"}}  class="col-'+t+'"><p>{{view.content.'+this.get("parentView.columns")[t]+"}}</p></td>";return Ember.Handlebars.compile(e)}),_clickItem:function(){this.get("parentView").clickItem!==null&&this.get("parentView").clickItem(this.get("content"))}})}),t.ScrollView=Ember.View.extend({classNames:["p8ui-scrollView"],alignBottomTo:null,_TO:!1,_resize:function(){var e=this,t=e.get("alignBottomTo");if(t!==null){var n=e.$().parents(t).filter(":first");e.$().css({height:n.height()-e.$().offset().top+n.offset().top}),e.$().mCustomScrollbar("update")}},_windowResizeListener:function(e){e.data.scrollView._TO!==!1&&clearTimeout(e.data.scrollView._TO),e.data.scrollView._TO=setTimeout(e.data.scrollView._resize.call(e.data.scrollView),200)},didInsertElement:function(){var e=this;setTimeout(function(){e.$().mCustomScrollbar({set_width:!1,set_height:!1,scrollInertia:550,scrollEasing:"easeOutCirc",mouseWheel:"auto",autoDraggerLength:!0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:20,scrollAmount:40},advanced:{updateOnBrowserResize:!1,updateOnContentResize:!1,autoExpandHorizontalScroll:!1},callbacks:{onScroll:function(){},onTotalScroll:function(){},onTotalScrollOffset:0}}),setTimeout(function(){e._resize.call(e)},200);var t=e.get("alignBottomTo");t!==null&&jQuery(window).bind("resize",{scrollView:this},e._windowResizeListener)},200)},willDestroyElement:function(){jQuery(window).unbind("resize",this._windowResizeListener)}})}();